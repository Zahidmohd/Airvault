---
import { Image } from "astro:assets";

// Import images
import img1 from "../../public/assets/baby-crawl.png";
import img2 from "../../public/assets/baking.png";
import img3 from "../../public/assets/mountain-view.png";
import img4 from "../../public/assets/friends-party.png";
import img5 from "../../public/assets/couple-moment.png";
---

<section class="bg-white py-24 overflow-hidden">
  <div class="container mx-auto px-4">
    <!-- Text Section -->
    <div class="text-center max-w-3xl mx-auto mb-20">
      <h2
        class="bg-gradient-to-r from-[#5C5C5C] via-[#3D3D3D] to-[#5C5C5C] bg-clip-text text-transparent text-4xl md:text-[#31323D] md:text-6xl font-bold mb-6"
      >
        Your memories are worth everything!
      </h2>
      <p
        class="text-[#3D3D3D] sm:font-medium md:text-[#31323D] text-xl md:text-2xl"
      >
        No one understands it better than us.
      </p>
    </div>
  </div>

  <!-- Image Section -->
  <div class="relative w-full">
    <div class="relative h-[684px] sm:h-[600px] lg:h-[500px] ">
      <!-- Images with responsive positioning -->
      <div
        class="absolute transition-all duration-500 ease-in-out image-1 z-10"
      >
        <img
          src={img1.src || "/placeholder.svg"}
          alt="Baby crawling"
          width={300}
          height={400}
          class="w-[207px] h-[273px] sm:w-[250px] lg:w-[300px] lg:h-[476.46px] sm:h-auto object-cover rounded-r-[2rem] transition-all duration-300"
        />
      </div>

      <div
        class="absolute transition-all duration-500 ease-in-out image-2 z-20"
      >
        <img
          src={img2.src || "/placeholder.svg"}
          alt="Friends baking together"
          width={300}
          height={400}
          class="w-[207px] h-[273px] sm:w-[250px] lg:w-[350px] lg:h-[476.46px] sm:h-auto object-cover rounded-[2rem] transition-all duration-300"
        />
      </div>

      <div
        class="absolute transition-all duration-500 ease-in-out image-3 z-30"
      >
        <img
          src={img3.src || "/placeholder.svg"}
          alt="Person on mountain top"
          width={300}
          height={400}
          class="w-[207px] h-[273px] sm:w-[250px] lg:w-[380px] lg:h-[476.46px] sm:h-auto object-cover rounded-[2rem] transition-all duration-300"
        />
      </div>

      <div
        class="absolute transition-all duration-500 ease-in-out image-4 z-40"
      >
        <img
          src={img4.src || "/placeholder.svg"}
          alt="Friends enjoying party"
          width={300}
          height={400}
          class="w-[207px] h-[273px] sm:w-[250px] lg:w-[360px] lg:h-[476.46px] sm:h-auto object-cover rounded-[2rem] transition-all duration-300"
        />
      </div>

      <div
        class="absolute transition-all duration-500 ease-in-out  image-5 z-50"
      >
        <img
          src={img5.src || "/placeholder.svg"}
          alt="Couple moment"
          width={300}
          height={400}
          class="w-[207px] h-[273px] sm:w-[250px] lg:w-[300px] lg:h-[476.46px] sm:h-auto object-cover rounded-l-[2rem] transition-all duration-300"
        />
      </div>
    </div>
  </div>
</section>

<style>
  /* Styles for screens larger than 992px */
  @media (min-width: 993px) {
    .image-1 {
      left: 0;
      top: calc(50px + ((100vw - 320px) * 0.02));
      transform: -rotate(4deg); /* No rotation for the left image */
    }
    .image-2 {
      left: calc(15% + ((100vw - 320px) * 0.05));
      top: 0;
    }
    .image-3 {
      left: 50%;
      top: 30%;
      transform: translate(-50%, -50%);
    }
    .image-4 {
      right: calc(15% + ((100vw - 320px) * 0.05));
      bottom: 0;
    }
    .image-5 {
      right: 0;
      bottom: calc(0px + ((100vw - 320px) * 0.03));
    }
  }

  /* Styles for screens between 768px and 992px */
  @media (max-width: 992px) and (min-width: 769px) {
    .image-1 {
      left: 0;
      top: calc(30px + ((100vw - 320px) * 0.02));
      transform: -rotate(4deg); /* No rotation for the left image */
    }
    .image-2 {
      left: calc(15% + ((100vw - 320px) * 0.05));
      top: 0;
    }
    .image-3 {
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
    }
    .image-4 {
      right: calc(15% + ((100vw - 320px) * 0.05));
      bottom: 0;
    }
    .image-5 {
      right: 0;
      bottom: calc(0px + ((100vw - 320px) * 0.03));
    }
  }

  /* Styles for screens between 564px and 768px */
  @media (max-width: 768px) and (min-width: 565px) {
    .image-1 {
      left: 0;
      top: calc(20px + ((100vw - 320px) * 0.02));
      transform: -rotate(4deg); /* No rotation */
    }
    .image-2 {
      left: calc(10% + ((100vw - 320px) * 0.05));
      top: 0;
    }
    .image-3 {
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
    }
    .image-4 {
      right: calc(10% + ((100vw - 320px) * 0.05));
      bottom: 0;
    }
    .image-5 {
      right: 0;
      bottom: calc(0px + ((100vw - 320px) * 0.03));
    }
  }

  /* Styles for screens smaller than 564px */
  @media (max-width: 564px) {
    .image-1 {
      top: 50px;
      left: 0;
      transform: -rotate(4deg); /* Stick to left */
    }
    .image-2 {
      top: 0;
      right: 0; /* Stick to right */
    }
    .image-3 {
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
    }
    .image-4 {
      bottom: 0;
      left: 0;
    }
    .image-5 {
      bottom: 0;
      right: 0; /* Stick to right */
    }
  }
</style>

<script>
  function updateImagePositions() {
    const width = window.innerWidth;
    const images = document.querySelectorAll(".memory-section .transition-all");

    if (width <= 640) {
      // Mobile rotations
      const mobileRotations = [0, 0, 9, 0, 3];
      images.forEach((img, index) => {
        const transform =
          index === 2
            ? `translate(-50%, -50%) rotate(${mobileRotations[index]}deg)`
            : `rotate(${mobileRotations[index]}deg)`;
        (img as HTMLElement).style.transform = transform;
      });
    } else {
      // Desktop rotations
      images.forEach((img, index) => {
        const rotation = [
          6 + (width - 320) * 0.002,
          9 + (width - 320) * -0.01,
          3 + (width - 320) * 0.003,
        ][index];

        (img as HTMLElement).style.transform =
          index === 2
            ? `translate(-50%, -50%) rotate(${rotation}deg)`
            : `rotate(${rotation}deg)`;
      });
    }
  }

  window.addEventListener("resize", updateImagePositions);
  window.addEventListener("load", updateImagePositions);
  updateImagePositions();
</script>
